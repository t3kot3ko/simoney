- model_class = User
.page-header
  %h1= "Dashboard"

.row
  .col-md-4
    .alert.alert-dissmissable.alert-success
      %h2 現在の資産
      %p.lead= @user.property.to_s + "円"
      %p= "（最終更新：#{@user.property_fix_histories.last.created_at.to_s} ）"
  .col-md-4
    .alert.alert-dissmissable.alert-success
      %h2 今月の支出予定
      %table.table.table-bordered
        %tbody
          %tr
            %th 収入
            %td 10000
          %tr
            %th 支出
            %td 10000
          %tr
            %th 見込み
            %td 10000
  .col-md-4
    .alert.alert-dissmissable.alert-success
      %h2 今週の支出予定
      %table.table.table-bordered
        %tbody
          %tr
            %th 収入
            %td 10000
          %tr
            %th 支出
            %td 10000
          %tr
            %th 見込み
            %td 10000

.row
  .col-md-5
    %h3 今月の支出
    %table.table.table-striped
      %tbody
        %tr
          %th 計画日
          %th カテゴリ
          %th 収支計画
        - @user.plans.order(:planned_at).after_today.each do |plan|
          %tr
            %td= plan.planned_at
            %td= plan.category
            - if plan.amount > 0
              %td.info= plan.amount
            - else
              %td.danger= plan.amount

  .col-md-1
  .col-md-5
    %h3 今月の定期支出
    %table.table.table-striped
      %tbody
        %tr
          %th 計画日
          %th 
          %th カテゴリ
          %th 収支計画

        // inline into the controller
        - s_date = Date.today
        - e_date = (Date.today - (Date.today.day) + 1) + 1.month
        - @user.regular_planned(s_date, e_date).each do |planned_at, plans|
          - plans.each do |plan|
            %tr
              %td= planned_at
              %td= plan.kind
              %td= plan.category
              - if plan.amount > 0
                %td.info= plan.amount
              - else
                %td.danger= plan.amount

%ul.nav.nav-tabs
  %li.active
    %a(data-toggle="tab" aria-expanded="true")一覧
  %li.active
    %a(data-toggle="tab" aria-expanded="true")グラフ
  %li.active
    %a(data-toggle="tab" aria-expanded="true")カレンダー

%h3 Monthly transition
= high_chart("sample", @graph)


%h3 Property fix histories
%table
  %tr
    %th Fixed at
    %th New property
  - @user.property_fix_histories.each do |history|
    %tr
      %th= history.created_at
      %th= history.new_property
  
// = link_to t('.back', :default => t("helpers.links.back")), users_path, :class => 'btn btn-default'
// = link_to t('.edit', :default => t("helpers.links.edit")), edit_user_path(@user), :class => 'btn btn-default'
// = link_to t('.destroy', :default => t("helpers.links.destroy")), user_path(@user), :method => "delete", :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-danger'

